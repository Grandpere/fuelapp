<turbo-frame id="receipt_form_frame">
    {% if errors is not empty %}
        <div class="flash" style="border-color: rgba(255,95,86,0.5); background: rgba(103,33,40,0.4); color: #ffd6d4;">
            <ul style="margin: 0; padding-left: 1.15rem;">
                {% for error in errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    <form method="post" action="{{ path('ui_receipt_new') }}" data-turbo-frame="_top" style="display:grid; gap:0.9rem;">
        <input type="hidden" name="_token" value="{{ csrfToken }}">

        <label class="label">
            Date
            <input class="input" type="text" name="issuedAt" value="{{ formData.issuedAt }}" data-datepicker="datetime" autocomplete="off" required>
        </label>

        <fieldset class="card-subtle" style="padding: 0.9rem; border: 1px solid rgba(147,178,198,0.3);">
            <legend class="muted">Fuel line</legend>
            <div class="form-grid-2">
                <label class="label">
                    Fuel type
                    <select class="select" name="fuelType">
                        {% for fuelType in fuelTypes %}
                            <option value="{{ fuelType }}" {% if formData.fuelType == fuelType %}selected{% endif %}>{{ fuelType|upper }}</option>
                        {% endfor %}
                    </select>
                </label>
                <label class="label">
                    Quantity (mL)
                    <input class="input" type="number" min="1" step="1" name="quantityMilliLiters" value="{{ formData.quantityMilliLiters }}" required>
                </label>
                <label class="label">
                    Unit price (deci-cents/L)
                    <input class="input" type="number" min="0" step="1" name="unitPriceDeciCentsPerLiter" value="{{ formData.unitPriceDeciCentsPerLiter }}" required>
                    <small class="muted">Example: 1.879 â‚¬/L = 1879</small>
                </label>
                <label class="label">
                    VAT (%)
                    <input class="input" type="number" min="0" max="100" step="1" name="vatRatePercent" value="{{ formData.vatRatePercent }}" required>
                </label>
            </div>
        </fieldset>

        <fieldset class="card-subtle" style="padding: 0.9rem; border: 1px solid rgba(147,178,198,0.3);">
            <legend class="muted">Station</legend>
            <div class="form-grid-2">
                <label class="label">
                    Name
                    <input class="input" type="text" name="stationName" value="{{ formData.stationName }}" required>
                </label>
                <label class="label">
                    Street name
                    <input class="input" type="text" name="stationStreetName" value="{{ formData.stationStreetName }}" required>
                </label>
                <label class="label">
                    Postal code
                    <input class="input" type="text" name="stationPostalCode" value="{{ formData.stationPostalCode }}" required>
                </label>
                <label class="label">
                    City
                    <input class="input" type="text" name="stationCity" value="{{ formData.stationCity }}" required>
                </label>
                <label class="label">
                    Latitude (micro-degrees, optional)
                    <input class="input" type="number" name="latitudeMicroDegrees" value="{{ formData.latitudeMicroDegrees }}">
                </label>
                <label class="label">
                    Longitude (micro-degrees, optional)
                    <input class="input" type="number" name="longitudeMicroDegrees" value="{{ formData.longitudeMicroDegrees }}">
                </label>
            </div>
        </fieldset>

        <div style="display:flex; gap:0.6rem; flex-wrap:wrap;">
            <button class="btn btn-primary" type="submit">Save receipt</button>
            <a class="btn btn-secondary" href="{{ path('ui_receipt_index') }}" data-turbo-frame="_top">Cancel</a>
        </div>
    </form>
</turbo-frame>
